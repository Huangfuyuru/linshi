# 笔试-04

#### 前端浏览器输入URL后发生什么

1.	DNS解析，拿到服务器IP
2.	建立TCP连接，客户端与服务器的TCP连接，三次握手
3.	发送HTTP请求，客户端向服务器发送请求。是以请求报文的形式进行请求。
4.	服务器处理请求
5.	返回响应结果，使用响应报文
6.	关闭TCP连接，需要四次握手
7.	浏览器解析HTML
8.	浏览器布局渲染

#### 前端性能优化？

* 雅虎军规

  > 1. 尽量减少HTTP请求个数
  > 2. 使用CDN（内容分发网络）
  > 3. 为文件头指定Expires或Cache-Control,使内容具有缓存性
  > 4. 避免空的src和href
  > 5. 使用gzip压缩内容
  > 6. 把CSS放到顶部
  > 7. 把JS放到底部
  > 8. 避免使用CSS表达式
  > 9. 将CSS和JS放到外部文件
  > 10. 减少DNS查找次数
  > 11. 精简CSS和JS
  > 12. 避免跳转
  > 13. 剔除重复的JS和CSS
  > 14. 使AJAX可缓存
  > 15. 使用GET来完成AJAX请求
  > 16. 延迟加载
  > 17. 预加载
  > 18. 减少DOM元素个数根据域名划分页面内容
  > 19. 尽量减少iframe的个数
  > 20. 避免404
  > 21. 减少cookie的大小
  > 22. 使用无cookie的域
  > 23. 减少DOM访问
  > 24. 避免使用滤镜
  > 25. 优化图像

* 减少请求数量

  * 合并文件
  * 图片处理
  * 减少重定向
  * 使用缓存
  * 不使用CSS @import
  * 避免使用空的src和href

* 减少资源大小

  * 压缩
  * webp
  * 开启gzip

* 优化网络连接

  * 使用CDN（内容分发网络），它能够实时的根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上。其目的是使用户可以就近取得所需内容，解决Internet网络拥挤的状况，提高用户访问网站的响应速度
  * 使用DNS预解析
  * 并行连接
  * 持久连接
  * 管道化连接

* 优化资源加载

  * 资源加载位置
    1. CSS文件放到head中，先外链，后本页
    2. JS文件放到body底部，先外链，后本页
    3. 处理页面布局的JS文件放到head中
    4. body中尽量不写style标签和script标签
  * 资源加载时机
    1. 异步script标签
    2. 模块按需加载
    3. 资源懒加载和资源预加载

* 减少重绘回流

  * 样式设置
    1. 避免使用层级较深的选择器，或其他一些复杂的选择器，以提高CSS渲染效率
    2. 避免使用CSS表达式
    3. 元素适当地定义高度或最小高度
    4. 给图片设置尺寸
    5. 不要使用table布局
    6. 能使用CSS实现的效果，尽量使用CSS而不使用JS实现
  * 渲染层
    1. 对于一些进行动画的元素，使用硬件渲染，从而避免重绘和回流
  * DOM优化
    1. 缓存DOM
    2. 减少DOM深度及DOM数量
    3. 批量操作DOM
    4. 批量操作CSS样式
    5. 在内存中操作DOM
    6. DOM元素离线更新
    7. DOM读写分离
    8. 事件代理：指将事件监听器注册在父级元素上，由于子元素的事件会通过事件冒泡的方式向上传播到父节点，因此，可以由父节点的监听函数统一处理多个子元素的事件
    9. 防抖和节流
    10. 及时清理环境

* 性能更好的API

  * 用对选择器

  选择器的性能排序如下

  ```javascript
  id选择器 
  类选择器
  标签选择器
  相邻选择器 (h1+p)
  子选择器(ul>li)
  后代选择器(li a)
  通配符选择器(*)
  属性选择器
  伪类选择器
  ```

  

  * 使用requestAnimationFrame替代setTimeout和setInterval
  * 使用web worker

* webpack优化

  * 打包公共代码
  * 动态导入和按需加载
  * 剔除无用代码
  * 长缓存优化
  * 公共代码内联