### 重绘

#### 介绍

知道了DOM节点的样式与位置大小信息，那么 就可以将渲染树的每一个节点转化为屏幕上的实际像素，这个阶段叫重绘。当我们对DOM的修改导致的是样式的变化，却没有影响其几何属性，浏览器不需重新计算元素的几何属性。

#### 引起重绘的属性和方法

| background 等属性 | border等属性  | box-shadow等属性 |
| ----------------- | ------------- | ---------------- |
| color             | outline等属性 |                  |

### 回流

#### 介绍

再浏览器渲染过程中，生成渲染树之后，根据渲染树对可见DOM节点进行布局，要计算他们在设备视口内的确切位置和大小，这个计算的阶段就是回流。当我们对DOM的修改引发了DOM几何尺寸的变化，浏览器需要重新计算元素的几何属性，其他元素的几何属性和位置也会受到影响，然后再将计算的结果绘制出来。

#### 引起回流的属性和方法

任何会改变元素几何信息（元素的位置和尺寸大小）的操作，都会触发回流。

* 添加或者删除可见的DOM元素
* 元素的尺寸改变---边距、填充、边框、宽度和高度
* 内容变化---比如用户再input框中输入文字
* 浏览器窗口尺寸变化---resize事件发生
* 计算offsetWidth和offsetHight属性
* 设置style属性的值
* 激活伪类---如hover

### 如何减少重绘和回流

减少回流

1. 不要通过父级来改变子元素样式，最好直接改变子元素样式，改变子元素样式尽可能不要影响父元素和兄弟元素的大小和尺寸。
2. 通过class来设计元素样式，尽量不要使用style
3. 动画实现的速度选择，动画速度越快，回流次数越多，我们可以降低动画 速度或者使用requestAnimationFrame
4. 实现动画的元素，position属性可以设为fixed或absolute，脱离文档流
5. 不要使用table布局，因为一个小改动会使整个table回流。如果使用table可以设置table-layout为auto或fixed
6. CSS选择符从右往左匹配查找，避免节点层级过多
7. 使用transform代替top,left,margin-top这些位移属性
8. 使用visibility代替display:none;前者只会引起重绘，后者会引发回流。
9. 避免频繁读取会引发回流/重绘的属性(offsetWidth,offsetHeight等)，如果确实需要多次使用，就用一个变量缓存起来。



